
SVGs = new class SVGs {

  constructor() {
    this.stroke_w = 0.5
    this.rect_w = 12
    this.r_bound = this.rect_w + 2 * this.stroke_w
    this.btn_str = this.create_btn_str()
  }

  p(x,y){
    return x+" "+y+" ";
  }
  
  get_bound(w){
    return w + 2 * this.stroke_w
  }

  rectangle(x, y, w, r1, h){
    var r2 = r1
    var r3 = r1
    var r4 = r1
    if (h == null) var h = w
    var strPath = "M"+this.p(x+r1,y); //A
    strPath+="L"+this.p(x+w-r2,y)+"Q"+this.p(x+w,y)+this.p(x+w,y+r2); //B
    strPath+="L"+this.p(x+w,y+h-r3)+"Q"+this.p(x+w,y+h)+this.p(x+w-r3,y+h); //C
    strPath+="L"+this.p(x+r4,y+h)+"Q"+this.p(x,y+h)+this.p(x,y+h-r4); //D
    strPath+="L"+this.p(x,y+r1)+"Q"+this.p(x,y)+this.p(x+r1,y); //A
    strPath+="Z";

    return strPath;
  }

  create_btn_str(){
    return this.rectangle(this.stroke_w,this.stroke_w,this.rect_w,2)
  }
  
  create_btn(x,y,w,h,id,type,fkt,sel) {
    var stroke_w = SVGs.stroke_w
    var path = document.createElementNS("http://www.w3.org/2000/svg", 'path')
    path.setAttributeNS(null, "d", this.rectangle(0,0, w, 0, h));
    var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg")
    svg.setAttributeNS(null, "stroke-width", stroke_w);
    svg.setAttributeNS(null, "z-index", 30)
    if (sel) {var col = V.col_btn_active}
    else {col = V.col_btn_inactive }
    svg.style.fill = col
    svg.style.stroke = 'black'
    svg.style.position="absolute"
    svg.style.width = w
    svg.style.height = h
    svg.style.left = x
    svg.style.top = y
    svg.id = id
    if (type == 'button'){svg.onclick = fkt}
    else if (type == 'toggle') {
      svg.onclick = sf.svg_toggle
      svg.fkt = fkt
    }
    svg.appendChild(path);
    svg.state = sel
    return svg
  }
}


class SVG_STRINGS {

  constructor() {
    this.play_btn_str = "m 205.846,158.266 -86.557,49.971 c -1.32,0.765 -2.799,1.144 " +
    "-4.272,1.144 -1.473,0 -2.949,-0.379 -4.274,-1.144 -2.64,-1.525 " +
    "-4.269,-4.347 -4.269,-7.402 V 100.89 c 0,-3.053 1.631,-5.88 " +
    "4.269,-7.402 2.648,-1.528 5.906,-1.528 8.551,0 l 86.557,49.974 " +
    "c 2.645,1.53 4.274,4.352 4.269,7.402 0,3.052 -1.626,5.877 -4.274,7.402 z"
    
    this.back_btn_str = "m 217.343,203.764 c 0,3.704 -1.979,7.132 -5.187,8.982 -1.605,0.926 " +
    "-3.4,1.393 -5.187,1.393 -1.792,0 -3.582,-0.467 -5.187,-1.393 l -81.103," +
    "-46.823 c -0.993,-0.573 -1.854,-1.312 -2.594,-2.153 v 35.955 c 0,9.498 " +
    "-7.7,17.198 -17.198,17.198 -9.498,0 -17.198,-7.7 -17.198,-17.198 v " +
    "-89.078 h 0.002 c 0,-9.498 7.7,-17.198 17.198,-17.198 9.498,0 17.198,7.7 " +
    "17.198,17.198 v 39.465 c 0.739,-0.84 1.6,-1.58 2.594,-2.155 l 81.1," +
    "-46.823 c 3.211,-1.854 7.164,-1.854 10.375,0 3.208,1.852 5.187,5.278 " +
    "5.187,8.984 v 93.646 z"
    
    this.stop_btn_str = "m 196.63,210.605 h -93.26 c -7.706,0 -13.974,-6.269 -13.974,-13.974 " +
    "v -93.259 c 0,-7.706 6.269,-13.974 13.974,-13.974 h 93.259 c 7.706," +
    "0 13.974,6.269 13.974,13.974 v 93.259 h 0.001 c 0,7.706 -6.268,13.974 -13.974,13.974 z"
    
    this.pause_btn_str = "m 134.41,194.538 c 0,9.498 -7.7,17.198 -17.198,17.198 -9.498,0 " +
    "-17.198,-7.7 -17.198,-17.198 V 105.46 c 0,-9.498 7.7,-17.198 " +
    "17.198,-17.198 9.498,0 17.198,7.7 17.198,17.198 z m 64.545,0 c " +
    "0,9.498 -7.701,17.198 -17.198,17.198 -9.498,0 -17.198,-7.7 " +
    "-17.198,-17.198 V 105.46 c 0,-9.498 7.7,-17.198 17.198,-17.198" +
    " 9.498,0 17.198,7.7 17.198,17.198 z"
    
    this.loop_btn_str = "m 230.091,172.444 c -9.921,37.083 -43.801,64.477 -83.969,64.477 " +
    "-47.93,0 -86.923,-38.99 -86.923,-86.923 0,-47.933 38.99,-86.92 " +
    "86.923,-86.92 21.906,0 41.931,8.157 57.228,21.579 l -13.637,23.623 " +
    "c -11,-11.487 -26.468,-18.664 -43.594,-18.664 -33.294,0 -60.38,27.088 " +
    "-60.38,60.38 0,33.294 27.085,60.38 60.38,60.38 25.363,0 47.113," +
    "-15.728 56.038,-37.937 h -20.765 l 36.168,-62.636 36.166,62.641 h -23.635 z"
    
    this.bounds_btn_str = "m 70.75,90.24023 c -1.4415,0 -2.882328,0.37269 -4.173828,1.11719 " +
    "-2.584,1.488 -4.169922,4.25152 -4.169922,7.22852 0,55.34029 0.31608," +
    "53.40689 0,102.60351 0,2.98 1.588875,5.73757 4.171875,7.22657 " +
    "1.292,0.744 2.731875,1.12304 4.171875,1.12304 1.44,0 2.880922," +
    "-0.37904 4.169922,-1.12304 l 59.533198,-51.30079 c 2.583,-1.488 " +
    "4.17488,-4.24851 4.17188,-7.22851 0.01,-2.978 -1.58497,-5.74056 " +
    "-4.16797,-7.22656 L 74.925781,91.35742 C 73.634281,90.61292 72.1915," +
    "90.24023 70.75,90.24023 Z m 160.26758,0.11329 c -1.44,0 -2.88288," +
    "0.37904 -4.17188,1.12304 l -59.53125,51.30078 c -2.583,1.488 " +
    "-4.17682,4.24852 -4.17383,7.22852 -0.01,2.978 1.58497,5.73861 " +
    "4.16797,7.22461 l 59.53321,51.30469 c 2.583,1.489 5.76465,1.489 " +
    "8.34765,0 2.584,-1.488 4.17188,-4.25152 4.17188,-7.22852 0,-55.34029 " +
    "-0.31608,-53.40689 0,-102.60352 0,-2.98 -1.59083,-5.73756 " +
    "-4.17383,-7.22656 -1.292,-0.744 -2.72992,-1.12304 -4.16992,-1.12304 z"
    
    this.loop_bound_left = "M 0,20 V 0 L 12,9.302 V 0 h 3 v 10 10 h -3 v -9.301 z"
    
    this.loop_bound_right = "M 15,0 15,20 3,10.698 3,20 0,20 0,10 V 0 l 3,0 v 9.301 z"
    
    this.eject_btn_str = "M 149.48242 82.082031 C 145.87942 82.082031 142.44423 83.471063 " +
    "139.99023 85.914062 L 79.53125 146.13867 C 79.38025 146.28667 " +
    "79.238703 146.43684 79.095703 146.58984 C 78.156703 147.62484 " +
    "77.433734 148.76403 76.927734 149.95703 C 76.426734 151.14503 " +
    "76.120781 152.41505 76.050781 153.74805 C 76.039781 153.95105 " +
    "76.035156 154.14956 76.035156 154.35156 L 76.035156 154.50391 " +
    "C 76.059156 156.15091 76.437375 157.72444 77.109375 159.14844 " +
    "C 77.781375 160.58244 78.763734 161.91178 80.052734 163.05078 " +
    "L 80.0625 163.06055 C 80.2465 163.22355 80.436906 163.37825 " +
    "80.628906 163.53125 C 80.633906 163.53125 80.633672 163.53711 " +
    "80.638672 163.53711 C 81.774672 164.42911 83.034422 165.10612 " +
    "84.357422 165.57812 C 85.605422 166.02412 86.947703 166.29328 " +
    "88.345703 166.36328 L 88.359375 166.36328 C 88.583375 166.36828 " +
    "88.728062 166.36805 89.039062 166.37305 L 209.92188 166.37305 " +
    "L 209.95703 166.37305 L 210.00586 166.37305 C 217.16686 166.37305 " +
    "222.97461 160.99247 222.97461 154.35547 C 222.97461 150.85647 " +
    "221.36683 147.71072 218.79883 145.51172 L 158.97656 85.914062 " +
    "C 156.52256 83.469063 153.08542 82.082031 149.48242 82.082031 " +
    "z M 90.736328 184.95898 C 82.618328 184.95898 76.037109 " +
    "191.53916 76.037109 199.66016 C 76.037109 207.77616 82.618328 " +
    "214.35547 90.736328 214.35547 L 208.27539 214.35547 C 216.39339 " +
    "214.35547 222.97466 207.77316 222.97266 199.66016 C 222.97266 " +
    "191.53916 216.39144 184.95898 208.27344 184.95898 L 90.736328 " +
    "184.95898 z"
    
    this.scroll_btn_str = "m 84.09375,90.23633 c -1.296003,0 -2.593806,0.34016 -3.753906,1.00976 l -42.7792" +
    "97,52.17188 c -2.3247,1.3392 -3.758559,3.82386 -3.755859,6.50586 -0.009,2.6802 1" +
    ".4253,5.16455 3.75,6.50195 l 42.779296,52.17383 c 2.3247,1.3401 5.188976,1.3401 " +
    "7.513676,0 2.3256,-1.3392 3.75394,-3.82656 3.7539,-6.50586 v -29.87403 h 25.7539" +
    "1 V 127.58301 H 92.27539 L 91.60156,97.75 c 4e-5,-2.682 -1.4292,-5.16381 -3.7539" +
    ",-6.50391 -1.1628,-0.6696 -2.45791,-1.00976 -3.75391,-1.00976 z m 125.76953,0.08" +
    "2 c -1.29735,0 -2.59546,0.33581 -3.75781,1.00586 -2.3256,1.3392 -3.56117,3.82498" +
    " -3.60547,6.5039 l -0.22461,29.75489 h -25.20117 v 44.63671 h 25.26172 l 0.0156," +
    "29.95411 c 0.0463,2.6816 1.43116,5.16185 3.75586,6.50195 1.1628,0.6696 2.45791,1" +
    ".01172 3.75391,1.01172 1.296,0 2.5938,-0.34212 3.7539,-1.01172 l 42.7793,-52.169" +
    "92 c 2.3247,-1.3392 3.75886,-3.82386 3.75586,-6.50586 0.009,-2.6802 -1.42725,-5." +
    "16651 -3.75195,-6.50391 l -42.7793,-52.17187 c -1.16235,-0.67005 -5.05321,-1.005" +
    "86 -3.75586,-1.00586 z m -74.51562,37.26465 v 44.63671 h 23.52343 v -44.63671 z"
    
    this.btn_str = "M 0 0 L 0 15 L 15 15 L 15 0 L 0 0 z M 14.394531 0.67382812 " +
    "L 14.40625 14.369141 L 0.74804688 14.345703 L 0.69726562" +
    " 0.68359375 L 14.394531 0.67382812 z M 1.7441406 1.765625 " +
    " L 1.7304688 13.478516 L 13.388672 13.490234 L 13.373047 " +
    " 1.7832031 L 1.7441406 1.765625 z "
    
    this.attachment_str = "m 221.999,133.598 -98.569,98.562 0.005,0.005 c -0.034,0.034 -0.067,0.057 -0.101," +
    "0.091 l -0.604,0.604 -0.031,-0.034 c -5.561,5.179 -12.766,7.763 -20.225,7.763 -8" +
    ".896,0 -18.124,-3.628 -25.264,-10.769 -6.349,-6.344 -10.156,-14.54 -10.719,-23.0" +
    "78 -0.558,-8.445 2.116,-16.236 7.485,-22.134 l -0.054,-0.054 97.41,-97.41 c 8.22" +
    "7,-8.229 22.209,-7.623 31.177,1.343 4.204,4.204 6.733,9.656 7.109,15.346 0.399,5" +
    ".996 -1.707,11.765 -5.776,15.829 l -79.296,79.304 -11.005,-11.002 79.301,-79.307" +
    " c 1.162,-1.162 1.32,-2.703 1.248,-3.787 -0.127,-1.898 -1.071,-3.859 -2.588,-5.3" +
    "77 -2.85,-2.85 -7.049,-3.462 -9.168,-1.341 l -96.455,96.453 0.003,0.003 c -2.783" +
    ",2.78 -4.155,6.725 -3.864,11.108 0.316,4.77 2.516,9.423 6.196,13.103 7.306,7.304" +
    " 18.14,8.364 24.18,2.376 l 98.608,-98.6 c 4.593,-4.596 6.865,-11.056 6.393,-18.1" +
    "86 C 216.897,96.89 213.453,89.584 207.703,83.834 196.104,72.238 178.72,70.757 16" +
    "8.942,80.53 L 87.363,162.106 76.358,151.104 157.937,69.525 c 15.842,-15.839 43.1" +
    "03,-14.361 60.768,3.302 8.421,8.416 13.468,19.265 14.218,30.55 0.771,11.672 -3.1" +
    "07,22.404 -10.924,30.221 z"
    
    this.settings_str = "m 134.26758 77.240234 L 132.89258 98.548828 C 128.87258 99.741828 125.0262 101.3" +
    "2997 121.4082 103.29297 L 105.37695 89.205078 L 83.132812 111.45312 L 97.220703 " +
    "127.48438 C 95.260703 131.09938 93.667609 134.94789 92.474609 138.96289 L 71.167" +
    "969 140.33789 L 71.167969 171.79688 L 92.474609 173.17188 C 93.667609 177.18988 " +
    "95.257703 181.03434 97.220703 184.65234 L 83.132812 200.68359 L 105.375 222.9335" +
    "9 L 121.4082 208.84375 C 125.0262 210.80475 128.87367 212.39398 132.88867 213.58" +
    "398 L 134.26367 234.89258 L 165.7207 234.89648 L 167.09766 213.58594 C 171.11566" +
    " 212.39594 174.96208 210.80475 178.58008 208.84375 L 194.61133 222.93555 L 216.8" +
    "5547 200.69141 L 202.76758 184.65234 C 204.73058 181.03634 206.32067 177.19188 2" +
    "07.51367 173.17188 L 228.82031 171.79883 L 228.82031 140.33789 L 207.51562 138.9" +
    "6289 C 206.32262 134.94789 204.73053 131.10237 202.76953 127.48438 L 216.85742 1" +
    "11.45312 L 194.61328 89.205078 L 178.57812 103.29297 C 174.96013 101.32897 171.1" +
    "127 99.741828 167.0957 98.548828 L 165.71875 77.240234 L 134.26758 77.240234 z M" +
    " 149.58203 123.59961 A 29.872881 31.144066 0 0 1 179.45508 154.74414 A 29.872881" +
    " 31.144066 0 0 1 149.58203 185.88867 A 29.872881 31.144066 0 0 1 119.70898 154.7" +
    "4414 A 29.872881 31.144066 0 0 1 149.58203 123.59961 z "
    
    this.clear_str = "m 206.584,207.171 c -5.989,5.984 -15.691,5.984 -21.675,0 l -34.132,-34.132 -35.6" +
    "86,35.686 c -5.986,5.984 -15.689,5.984 -21.672,0 -5.989,-5.991 -5.989,-15.691 0," +
    "-21.68 L 129.102,151.362 95.878,118.14 c -5.984,-5.991 -5.984,-15.691 0,-21.678 " +
    "5.986,-5.986 15.691,-5.986 21.678,0 l 33.222,33.222 31.671,-31.673 c 5.986,-5.98" +
    "4 15.694,-5.986 21.675,0 5.989,5.991 5.989,15.697 0,21.678 l -31.668,31.671 34.1" +
    "3,34.132 c 5.984,5.983 5.987,15.691 -0.002,21.679 z"
    
    this.import_str = "m 73 -0.34,0.552 -0.363,0.524 -0.76,1.032 -1.227,1.499 l -15.115,15.115 -16.591,16" +
    ".591 c -2.077,2.075 -4.793,3.105 -7.508,3.105 h -0.078 -0.078 c -2.715,0 -5.431," +
    "-1.03 -7.508,-3.105 L 126.089,135.485 110.974,120.37 c -0.467,-0.467 -0.864,-0.9" +
    "73 -1.222,-1.496 -0.127,-0.184 -0.231,-0.373 -0.345,-0.56 -0.207,-0.35 -0.397,-0" +
    ".703 -0.563,-1.069 -0.109,-0.239 -0.213,-0.475 -0.301,-0.718 -0.127,-0.348 -0.22" +
    "3,-0.7 -0.314,-1.056 -0.062,-0.246 -0.143,-0.485 -0.187,-0.734 -0.598,-3.301 0.3" +
    "7,-6.831 2.925,-9.38 z m 120.607,103.958 h -0.003 c 0,14.337 -14.057,25.568 -32." +
    "005,25.568 h -99.132 c -17.945,0 -32.005,-11.23 -32.005,-25.568 V 140.31 c 0,-12" +
    ".117 10.058,-21.988 24.004,-24.761 0.604,5.981 3.224,11.526 7.534,15.834 l 4.108" +
    ",4.108 h -3.641 c -7.265,0 -11.256,3.621 -11.256,4.819 v 69.005 c 0,1.201 3.992," +
    "4.819 11.256,4.819 h 99.135 c 7.265,0 11.256,-3.621 11.256,-4.819 V 140.31 c 0,-" +
    "1.198 -3.992,-4.819 -11.256,-4.819 h -3.12 l 4.111,-4.111 c 4.282,-4.279 6.894,-" +
    "9.786 7.516,-15.727 13.681,2.913 23.498,12.69 23.498,24.66 z"
    
    this.midi_str = "m 59.630395,115.46728 c 2.70604,0 4.29268,1.5987 5.87899,3.37162 l 20.51594,27.6" +
    "9062 21.263435,-28.72858 c 3.0793,-3.81412 10.62603,-2.33248 10.62603,4.11771 v " +
    "52.49939 c 0,4.1174 -2.60112,6.43855 -5.5871,6.43855 -3.35923,0 -5.97154,-2.3211" +
    "5 -5.97154,-6.43855 v -34.50221 l -15.478425,19.58334 c -3.35923,4.11739 -7.5464" +
    "6,4.11739 -10.63742,0 l -13.8923,-19.58334 v 34.50221 c 0,4.1174 -3.35838,6.4385" +
    "5 -6.71761,6.43855 -2.98599,0 -5.5871,-2.32115 -5.5871,-6.43855 v -52.49939 c 0," +
    "-4.85222 4.10577,-6.45137 5.5871,-6.45137 z m 81.030055,0.60655 c 3.0793,-0.035 " +
    "6.15805,1.87906 6.15805,5.84482 v 53.23408 c 0,7.7449 -12.31753,7.93152 -12.3175" +
    "3,0 v -53.23408 c 0,-3.82579 3.08019,-5.80981 6.15948,-5.84482 z m 101.5702,0 c " +
    "3.0793,-0.035 6.15806,1.87906 6.15806,5.84482 v 53.23408 c 0,7.7449 -12.31754,7." +
    "93152 -12.31754,0 v -53.23408 c 0,-3.82579 3.08018,-5.80981 6.15948,-5.84482 z m" +
    " -72.49278,0.2449 h 21.35742 c 42.62025,0 41.68739,64.53786 0.84006,64.53786 h -" +
    "22.19748 c -3.0793,0 -6.43855,-1.69238 -6.43855,-5.78644 v -52.96498 c 0,-3.3592" +
    "4 3.35925,-5.78644 6.43855,-5.78644 z m 5.86759,11.37355 v 41.77938 h 15.47844 c" +
    " 25.18258,0 26.30232,-41.77938 0,-41.77938 z"
    
    this.test_str ="m 221.302,107.945 -14.247,14.247 -29.001,-28.999 -11.002,11.002 29.001,29.001 -7" +
    "1.132,71.126 -28.999,-28.996 -11.002,11.002 28.999,28.999 -7.088,7.088 -0.135,-0" +
    ".135 c -0.786,1.294 -2.064,2.238 -3.582,2.575 l -27.043,6.03 c -0.405,0.091 -0.8" +
    "17,0.135 -1.224,0.135 -1.476,0 -2.91,-0.581 -3.973,-1.647 -1.364,-1.359 -1.932,-" +
    "3.322 -1.512,-5.203 l 6.027,-27.035 c 0.34,-1.517 1.286,-2.798 2.578,-3.582 L 77" +
    ".83,193.416 192.3,78.941 c 1.678,-1.675 4.404,-1.675 6.082,0.005 l 22.922,22.917" +
    " c 1.678,1.678 1.678,4.404 -0.002,6.082 z"
    
    this.faces_str1 = "M 295.80078 0 L 325.19922 810 L 384 810 L 413.40039 0 L 295.80078 " +
    "0 z M 60 60 L 60 270 L 270 270 L 270 60 L 60 60 z M 1050 60 L 1050 " +
    "270 L 1200 270 L 1200 60 L 1050 60 z M 503.40039 145.19922 L 503.40039 " +
    "300 L 645.59961 300 L 645.59961 145.19922 L 503.40039 145.19922 z " +
    "M 806.40039 945 L 806.40039 990 L 1120.8008 990 L 1120.8008 945 L " +
    "806.40039 945 z" 
    
    this.faces_str2 = "M 885 0 L 914.40039 810 L 973.19922 810 L 1002.5996 0 L 885 0 z " +
    "M 628.80078 37.199219 L 628.80078 114 L 786.59961 114 L " +
    "786.59961 37.199219 L 628.80078 37.199219 z M 217.19922 945 " +
    "L 217.19922 990 L 531.59961 990 L 531.59961 945 L 217.19922 945 z" 
    
    this.solo_str = "m 149.74609 77.251953 C 106.41443 77.251953 71.013672 112.65272 71.013672 155.98" +
    "438 C 71.013672 199.31602 106.41443 234.7168 149.74609 234.7168 C 193.07775 234." +
    "7168 228.47852 199.31602 228.47852 155.98438 C 228.47852 112.65272 193.07775 77." +
    "251953 149.74609 77.251953 z M 149.74609 102.76758 C 179.28843 102.76758 202.962" +
    "89 126.44204 202.96289 155.98438 C 202.96289 185.5267 179.28843 209.20117 149.74" +
    "609 209.20117 C 120.20376 209.20117 96.529297 185.52671 96.529297 155.98438 C 96" +
    ".529297 126.44204 120.20376 102.76758 149.74609 102.76758 z M 149.74609 124.0976" +
    "6 C 132.19677 124.09766 117.85938 138.43505 117.85938 155.98438 C 117.85938 173." +
    "53369 132.19677 187.87109 149.74609 187.87109 C 167.29542 187.87109 181.63281 17" +
    "3.53369 181.63281 155.98438 C 181.63281 138.43505 167.29542 124.09766 149.74609 " +
    "124.09766 z "
  }
}

svg_str = new SVG_STRINGS()